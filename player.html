<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>Live Tournament Bracket</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { background: #121212; color: #ddd; font-family: 'Segoe UI', sans-serif; padding: 20px; display:flex; justify-content:center; }
        
        h2 { position: fixed; top: 0; left: 20px; color: #00d2ff; }

        /* Copy of Bracket Styles (Read Only) */
        .bracket-container { display: flex; padding-top: 60px; gap: 60px; }
        .round-column { display: flex; flex-direction: column; justify-content: space-around; min-width: 180px; }
        
        .match-box { background: #2a2a2a; border: 1px solid #444; border-radius: 6px; margin: 10px 0; position: relative; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .player-slot { 
            padding: 10px 15px; border-bottom: 1px solid #333; height: 25px; display: flex; align-items: center; font-weight: bold; font-size: 15px;
        }
        .player-slot:last-child { border-bottom: none; }
        
        /* Connector Lines */
        .match-box::after { content: ""; position: absolute; right: -30px; top: 50%; width: 30px; height: 2px; background: #555; }
        .match-box:nth-child(odd)::before { content: ""; position: absolute; right: -30px; top: 50%; width: 2px; height: 100%; background: #555; transform: translateY(50%); }
        .round-column:last-child .match-box::after, .round-column:last-child .match-box::before { display: none; }

        /* Visual Status */
        .eliminated { text-decoration: line-through; color: #555; opacity: 0.6; }
        .winner { color: #2ed573; text-shadow: 0 0 5px rgba(46, 213, 115, 0.4); }
        .empty { color: #444; font-style: italic; font-size: 12px; }
    </style>
</head>
<body>

    <h2>üèÜ Tournament Live Bracket</h2>
    <div id="bracket-root" class="bracket-container">
        <p>Loading bracket...</p>
    </div>

<script>
    const firebaseConfig = { databaseURL: "https://sodium-chess-default-rtdb.firebaseio.com/" };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref('tournament_bracket').on('value', snap => {
        const data = snap.val();
        const root = document.getElementById('bracket-root');
        root.innerHTML = "";
        
        if(!data) return root.innerHTML = "<p style='margin-top:50px'>No tournament initialized yet.</p>";

        data.forEach(round => {
            const col = document.createElement('div');
            col.className = 'round-column';
            
            round.forEach(match => {
                const c1 = match.s1 === 'lost' ? 'eliminated' : (match.s1 === 'win' ? 'winner' : '');
                const c2 = match.s2 === 'lost' ? 'eliminated' : (match.s2 === 'win' ? 'winner' : '');
                
                // Show "Waiting..." if name is empty
                const n1 = match.p1 || "<span class='empty'>Waiting...</span>";
                const n2 = match.p2 || "<span class='empty'>Waiting...</span>";

                col.innerHTML += `
                    <div class="match-box">
                        <div class="player-slot ${c1}">${n1}</div>
                        <div class="player-slot ${c2}">${n2}</div>
                    </div>
                `;
            });
            root.appendChild(col);
        });
    });
</script>
</body>
</html>
